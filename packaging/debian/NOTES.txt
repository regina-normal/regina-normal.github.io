Notes for building Debian-based packages
----------------------------------------

---
SID
---

To build in a clean chroot:

- Ensure the user (e.g., bab) is in sudoers:

    $ su
    # visudo

- Once only, as root:

    # pbuilder create --debootstrapopts --variant=buildd

- For each package build, as the user:

    $ pdebuild
    $ cd /var/cache/pbuilder/results
    ... and fetch the resulting build.

---------------
STABLE / UBUNTU
---------------

To build only architecture-dependent binary packages;

    debuild -B

To build only a source package:

    debuild -S

To force the .orig.tar.gz to be uploaded (not just the diff):

    debuild -sa

---------
OLD NOTES
---------

To build binary packages only on debian sid from a .dsc:

    sbuild -d sid *.dsc

To build in a clean chroot:

- Install schroot
- If desired, edit /etc/schroot/mount-defaults for safer /home mounting,
  as described in ../chroots/0_init_schroot.txt
- Create /var/chroot
- Add schroot entries:

    [sid]
    type=directory
    description=Debian sid (unstable)
    directory=/var/chroot/sid
    users=bab
    root-users=root

- Create /var/chroot/sid/home/bab and chown to bab.bab
- If making an ubuntu chroot, add universe to <chroot>/etc/apt/sources.list
- Install the core distribution:

    sudo debootstrap --include=fakeroot --variant=buildd sid /var/chroot/sid

- Install build-depends:

    sudo schroot -c sid -- apt-get update
    sudo schroot -c sid -- apt-get install --no-install-recommends <build-deps>

- Install helper tools:

    sudo schroot -c sid -- apt-get install --no-install-recommends \
      devscripts lintian dput

- Enter the chroot and build.

 -- Ben Burton <bab@debian.org>, Fri, 29 Aug 2014 22:28:37 +1000
