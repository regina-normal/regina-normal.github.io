<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Regina Calculation Engine: regina::ProgressTrackerBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Regina Calculation Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceregina.html">regina</a></li><li class="navelem"><a class="el" href="classregina_1_1ProgressTrackerBase.html">ProgressTrackerBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classregina_1_1ProgressTrackerBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">regina::ProgressTrackerBase Class Reference<div class="ingroups"><a class="el" href="group__progress.html">Progress Tracking</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The base class for Regina's progress tracking classes.  
 <a href="classregina_1_1ProgressTrackerBase.html#details">More...</a></p>

<p><code>#include &lt;progress/progresstracker.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for regina::ProgressTrackerBase:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classregina_1_1ProgressTrackerBase.png" usemap="#regina::ProgressTrackerBase_map" alt=""/>
  <map id="regina::ProgressTrackerBase_map" name="regina::ProgressTrackerBase_map">
<area href="classregina_1_1ProgressTracker.html" title="Manages percentage-based progress tracking and cancellation polling for long operations." alt="regina::ProgressTracker" shape="rect" coords="0,56,180,80"/>
<area href="classregina_1_1ProgressTrackerOpen.html" title="Manages percentage-based progress tracking and cancellation polling for open-ended operations." alt="regina::ProgressTrackerOpen" shape="rect" coords="190,56,370,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ga2eb2ae852521c4f4e959297ab7048618"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618">isFinished</a> ()</td></tr>
<tr class="memdesc:ga2eb2ae852521c4f4e959297ab7048618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries whether the writing thread has finished all processing.  <a href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618">More...</a><br /></td></tr>
<tr class="separator:ga2eb2ae852521c4f4e959297ab7048618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedeedc497900770da12851add80a4ab8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#gaedeedc497900770da12851add80a4ab8">descriptionChanged</a> ()</td></tr>
<tr class="memdesc:gaedeedc497900770da12851add80a4ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries whether the stage description has changed since the last call to <a class="el" href="group__progress.html#gaedeedc497900770da12851add80a4ab8" title="Queries whether the stage description has changed since the last call to descriptionChanged().">descriptionChanged()</a>.  <a href="group__progress.html#gaedeedc497900770da12851add80a4ab8">More...</a><br /></td></tr>
<tr class="separator:gaedeedc497900770da12851add80a4ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39c2c85bdb1bb57b34be3e28181c20bd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga39c2c85bdb1bb57b34be3e28181c20bd">description</a> ()</td></tr>
<tr class="memdesc:ga39c2c85bdb1bb57b34be3e28181c20bd"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structregina_1_1Returns.html" title="A convenience base class for a non-void function object, which does nothing beyond provide a ReturnTy...">Returns</a> the human-readable description of the current stage.  <a href="group__progress.html#ga39c2c85bdb1bb57b34be3e28181c20bd">More...</a><br /></td></tr>
<tr class="separator:ga39c2c85bdb1bb57b34be3e28181c20bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19e33e37db0797ef5e8e35abea4d8c94"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga19e33e37db0797ef5e8e35abea4d8c94">cancel</a> ()</td></tr>
<tr class="memdesc:ga19e33e37db0797ef5e8e35abea4d8c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates to the writing thread that the user wishes to cancel the operation.  <a href="group__progress.html#ga19e33e37db0797ef5e8e35abea4d8c94">More...</a><br /></td></tr>
<tr class="separator:ga19e33e37db0797ef5e8e35abea4d8c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga814bfd4d68c5d8337351ed735ae8c761"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga814bfd4d68c5d8337351ed735ae8c761">isCancelled</a> ()</td></tr>
<tr class="memdesc:ga814bfd4d68c5d8337351ed735ae8c761"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries whether the reading thread has made a request for the writing thread to cancel the operation; in other words, whether <a class="el" href="group__progress.html#ga19e33e37db0797ef5e8e35abea4d8c94" title="Indicates to the writing thread that the user wishes to cancel the operation.">cancel()</a> has been called.  <a href="group__progress.html#ga814bfd4d68c5d8337351ed735ae8c761">More...</a><br /></td></tr>
<tr class="separator:ga814bfd4d68c5d8337351ed735ae8c761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32e5d8b58d63a732285c7a4426c838ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga32e5d8b58d63a732285c7a4426c838ac">setFinished</a> ()</td></tr>
<tr class="memdesc:ga32e5d8b58d63a732285c7a4426c838ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by the writing thread to indicate that it has finished all processing.  <a href="group__progress.html#ga32e5d8b58d63a732285c7a4426c838ac">More...</a><br /></td></tr>
<tr class="separator:ga32e5d8b58d63a732285c7a4426c838ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a25ee8f8eed8d569f2b1da756b7198e"><td class="memItemLeft" align="right" valign="top">
&#160;</td><td class="memItemRight" valign="bottom"><b>ProgressTrackerBase</b> (const <a class="el" href="classregina_1_1ProgressTrackerBase.html">ProgressTrackerBase</a> &amp;)=delete</td></tr>
<tr class="separator:ga9a25ee8f8eed8d569f2b1da756b7198e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ab2de95fe738ba2e1a4b6309da26c40"><td class="memItemLeft" align="right" valign="top">
<a class="el" href="classregina_1_1ProgressTrackerBase.html">ProgressTrackerBase</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classregina_1_1ProgressTrackerBase.html">ProgressTrackerBase</a> &amp;)=delete</td></tr>
<tr class="separator:ga0ab2de95fe738ba2e1a4b6309da26c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ga5cf91e864878e52d2cf8b0dd58235a87"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga5cf91e864878e52d2cf8b0dd58235a87">ProgressTrackerBase</a> ()</td></tr>
<tr class="memdesc:ga5cf91e864878e52d2cf8b0dd58235a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new progress tracker.  <a href="group__progress.html#ga5cf91e864878e52d2cf8b0dd58235a87">More...</a><br /></td></tr>
<tr class="separator:ga5cf91e864878e52d2cf8b0dd58235a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ga821882ca1b30c9d7654370d446201cc1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga821882ca1b30c9d7654370d446201cc1">desc_</a></td></tr>
<tr class="memdesc:ga821882ca1b30c9d7654370d446201cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The human-readable description of the current stage.  <a href="group__progress.html#ga821882ca1b30c9d7654370d446201cc1">More...</a><br /></td></tr>
<tr class="separator:ga821882ca1b30c9d7654370d446201cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace4db7669e858087bba300f96fe5169b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#gace4db7669e858087bba300f96fe5169b">descChanged_</a></td></tr>
<tr class="memdesc:gace4db7669e858087bba300f96fe5169b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has the description changed since the last call to <a class="el" href="group__progress.html#gaedeedc497900770da12851add80a4ab8" title="Queries whether the stage description has changed since the last call to descriptionChanged().">descriptionChanged()</a>?  <a href="group__progress.html#gace4db7669e858087bba300f96fe5169b">More...</a><br /></td></tr>
<tr class="separator:gace4db7669e858087bba300f96fe5169b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7b0513035c80581029d938d9555f7a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#gae7b0513035c80581029d938d9555f7a2">cancelled_</a></td></tr>
<tr class="memdesc:gae7b0513035c80581029d938d9555f7a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has the reading thread requested that the operation be cancelled?  <a href="group__progress.html#gae7b0513035c80581029d938d9555f7a2">More...</a><br /></td></tr>
<tr class="separator:gae7b0513035c80581029d938d9555f7a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d812d90fbd27e87ac89dc74fa8b4d11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga6d812d90fbd27e87ac89dc74fa8b4d11">finished_</a></td></tr>
<tr class="memdesc:ga6d812d90fbd27e87ac89dc74fa8b4d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Has the writing thread declared that it has finished all processing?  <a href="group__progress.html#ga6d812d90fbd27e87ac89dc74fa8b4d11">More...</a><br /></td></tr>
<tr class="separator:ga6d812d90fbd27e87ac89dc74fa8b4d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3dee3034485e87eadaa36d29e24bf1af"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__progress.html#ga3dee3034485e87eadaa36d29e24bf1af">lock_</a></td></tr>
<tr class="memdesc:ga3dee3034485e87eadaa36d29e24bf1af"><td class="mdescLeft">&#160;</td><td class="mdescRight">A mutex to stop the reading and writing threads from interfering with each other.  <a href="group__progress.html#ga3dee3034485e87eadaa36d29e24bf1af">More...</a><br /></td></tr>
<tr class="separator:ga3dee3034485e87eadaa36d29e24bf1af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The base class for Regina's progress tracking classes. </p>
<p>These classes manage progress tracking and cancellation polling for long operations. A typical progress tracker is simultaneously used by a <em>writing</em> thread, which is performing the long calculations, and a <em>reading</em> thread, which displays progress updates to the user and/or takes cancellation requests from the user.</p>
<p>Progress works through a series of <em>stages</em>. Each stage has a text description, as well as a numerical progress indicator. For the class <a class="el" href="classregina_1_1ProgressTracker.html" title="Manages percentage-based progress tracking and cancellation polling for long operations.">ProgressTracker</a>, this is a percentage that rises from 0 to 100 as the stage progresses; for <a class="el" href="classregina_1_1ProgressTrackerOpen.html" title="Manages percentage-based progress tracking and cancellation polling for open-ended operations.">ProgressTrackerOpen</a>, this is an integer that starts at 0 and rises (with no particular upper bound).</p>
<p>The life cycle of a progress tracker is as follows.</p>
<ul>
<li>The reading thread creates a progress tracker (of type <a class="el" href="classregina_1_1ProgressTracker.html" title="Manages percentage-based progress tracking and cancellation polling for long operations.">ProgressTracker</a> or <a class="el" href="classregina_1_1ProgressTrackerOpen.html" title="Manages percentage-based progress tracking and cancellation polling for open-ended operations.">ProgressTrackerOpen</a>), and passes it to the writing thread when the calculation begins.</li>
<li>The writing thread:<ul>
<li>creates the first stage by calling newStage();</li>
<li>as the stage progresses, repeatedly updates the progress of this stage by calling routines such as <a class="el" href="group__progress.html#ga682ed6f06d110cedb1050e90d8ff1122" title="Used by the writing thread to indicate the level of progress through the current stage.">ProgressTracker::setPercent()</a> or <a class="el" href="group__progress.html#ga1f550bdc662adca6a41f308d1cf573fe" title="Used by the writing thread to indicate that one more step has been completed.">ProgressTrackerOpen::incSteps()</a>, and also polls for cancellation by calling <a class="el" href="group__progress.html#ga814bfd4d68c5d8337351ed735ae8c761" title="Queries whether the reading thread has made a request for the writing thread to cancel the operation;...">isCancelled()</a>;</li>
<li>moves through any additional stages in a similar fashion, by calling newStage() and then repeatedly calling routines such as <a class="el" href="group__progress.html#ga682ed6f06d110cedb1050e90d8ff1122" title="Used by the writing thread to indicate the level of progress through the current stage.">ProgressTracker::setPercent()</a>, <a class="el" href="group__progress.html#ga1f550bdc662adca6a41f308d1cf573fe" title="Used by the writing thread to indicate that one more step has been completed.">ProgressTrackerOpen::incSteps()</a>, and <a class="el" href="group__progress.html#ga814bfd4d68c5d8337351ed735ae8c761" title="Queries whether the reading thread has made a request for the writing thread to cancel the operation;...">isCancelled()</a>;</li>
<li>calls <a class="el" href="group__progress.html#ga32e5d8b58d63a732285c7a4426c838ac" title="Used by the writing thread to indicate that it has finished all processing.">setFinished()</a> once all processing is complete (regardless of whether the operation finished naturally or was cancelled by the user);</li>
<li>never touches the progress tracker again.</li>
</ul>
</li>
<li>The reading thread:<ul>
<li>passes the progress tracker to the writing thread;</li>
<li>repeatedly polls the state of the tracker by calling routines such as <a class="el" href="group__progress.html#gaeabd136f37f58f7153d094f436d4d29f" title="Queries whether the percentage progress has changed since the last call to percentChanged().">ProgressTracker::percentChanged()</a>, <a class="el" href="group__progress.html#ga49106085e438e3553e557012c6576c1b" title="Queries whether the number of steps completed has changed since the last call to stepsChanged().">ProgressTrackerOpen::stepsChanged()</a>, <a class="el" href="group__progress.html#gaedeedc497900770da12851add80a4ab8" title="Queries whether the stage description has changed since the last call to descriptionChanged().">descriptionChanged()</a> and/or <a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618" title="Queries whether the writing thread has finished all processing.">isFinished()</a>;</li>
<li>if percentChanged() or stepsChanged() returns <code>true</code>, collects the total progress by calling percent() or steps() respectively and displays this to the user;</li>
<li>if <a class="el" href="group__progress.html#gaedeedc497900770da12851add80a4ab8" title="Queries whether the stage description has changed since the last call to descriptionChanged().">descriptionChanged()</a> returns <code>true</code>, collects the description of the current stage by calling <a class="el" href="group__progress.html#ga39c2c85bdb1bb57b34be3e28181c20bd" title="Returns the human-readable description of the current stage.">description()</a> and displays this to the user;</li>
<li>if the user ever chooses to cancel the operation, calls <a class="el" href="group__progress.html#ga19e33e37db0797ef5e8e35abea4d8c94" title="Indicates to the writing thread that the user wishes to cancel the operation.">cancel()</a> but continues polling the state of the tracker as above;</li>
<li>once <a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618" title="Queries whether the writing thread has finished all processing.">isFinished()</a> returns <code>true</code>, displays any final information to the user and destroys the progress tracker.</li>
</ul>
</li>
</ul>
<p>It is imperative that the writing thread does not access the tracker after calling <a class="el" href="group__progress.html#ga32e5d8b58d63a732285c7a4426c838ac" title="Used by the writing thread to indicate that it has finished all processing.">setFinished()</a>, and it is imperative that the reading thread does not destroy the tracker until after <a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618" title="Queries whether the writing thread has finished all processing.">isFinished()</a> returns <code>true</code>. In particular, even if the reading thread has called <a class="el" href="group__progress.html#ga19e33e37db0797ef5e8e35abea4d8c94" title="Indicates to the writing thread that the user wishes to cancel the operation.">cancel()</a>, it must still wait upon <a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618" title="Queries whether the writing thread has finished all processing.">isFinished()</a> before destroying the tracker. Until <a class="el" href="group__progress.html#ga2eb2ae852521c4f4e959297ab7048618" title="Queries whether the writing thread has finished all processing.">isFinished()</a> returns <code>true</code>, there is no guarantee that the writing thread has detected and honoured the cancellation request.</p>
<dl class="section note"><dt>Note</dt><dd>This class implements common functionality for <a class="el" href="classregina_1_1ProgressTracker.html" title="Manages percentage-based progress tracking and cancellation polling for long operations.">ProgressTracker</a> and <a class="el" href="classregina_1_1ProgressTrackerOpen.html" title="Manages percentage-based progress tracking and cancellation polling for open-ended operations.">ProgressTrackerOpen</a>, and should not be used on its own. Instead, you should always use either <a class="el" href="classregina_1_1ProgressTracker.html" title="Manages percentage-based progress tracking and cancellation polling for long operations.">ProgressTracker</a> or <a class="el" href="classregina_1_1ProgressTrackerOpen.html" title="Manages percentage-based progress tracking and cancellation polling for open-ended operations.">ProgressTrackerOpen</a> (according to whether you need percentage-based or open-ended progress tracking respectively). </dd></dl>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>progress/<a class="el" href="progresstracker_8h.html">progresstracker.h</a></li>
</ul>
</div><!-- contents -->
<hr>
Copyright &copy; 1999-2021, The Regina development team
<br>
This software is released under the GNU General Public License,
with some additional permissions; see the source code for details.
<br>
For further information, or to submit a bug or other problem, please contact
Ben Burton (<a href="mailto:bab@maths.uq.edu.au">bab@maths.uq.edu.au</a>).
</body>
</html>
